{% extends "store/main.html" %}

{% load static%}

<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
{% block content%}

<div class="d-flex justify-content-center">
    {% if messages%}{% for message in messages%}
    <div class="alert {{message.tags}} fade show" id="alert-box">
        <div class="d-flex align-items-center">
            <i class='bx bx-info-circle fs-5 m-2'></i>
        {{message}}
        {% endfor %}
        </div>
      </div>
    {% endif %}
</div>


				<!--start shop area-->
				<section class="py-4">
					<div class="container">
						<div class="btn btn-dark btn-ecomm d-xl-none position-fixed top-10 start-0 translate-middle-y z-index-1"  data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbarFilter"><span><i class='bx bx-filter-alt me-1'></i>Filters</span></div>
						<div class="row">
							 <div style="z-index:1000" id="filter-list" class="col-12 col-xl-3 filter-column">
								<nav class="navbar navbar-expand-xl flex-wrap p-0">
								  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbarFilter" aria-labelledby="offcanvasNavbarFilterLabel">
									<div class="offcanvas-header">
									  <h5 class="offcanvas-title mb-0 fw-bold" id="offcanvasNavbarFilterLabel">Filters</h5>
									  <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
									</div>
									<div class="offcanvas-body">
									  <div class="filter-sidebar">
										<div class="card rounded-0 shadow-none border">
										  <div class="card-header bg-transparent">
											  <h5 class="mb-0 fw-bold">Filters</h5>
										  </div>
										  <div class="card-body">
											<h6 class="p-1 fw-bold bg-light">Categories</h6>
											  <div class="categories">
											   <div class="categories-wrapper p-1">
												{% for category in categories%}
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekCate1">
												  <label class="form-check-label" for="chekCate1">
													<span>{{category.classname}}</span>
													{% comment %} <span class="product-number">(1548)</span> {% endcomment %}
												  </label>
												</div>
												{% endfor %}
											   </div>
											</div>
											<hr>
											{% comment %} <div class="brands">
											  <h6 class="p-1 fw-bold bg-light">Brands</h6>
											   <div class="brands-wrapper height-1 p-1">
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand1">
												  <label class="form-check-label" for="chekBrand1">
													<span>Samsung</span><span class="product-number">(1548)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand2">
												  <label class="form-check-label" for="chekBrand2">
													<span>Sony</span><span class="product-number">(478)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand3">
												  <label class="form-check-label" for="chekBrand3">
													<span>Microsoft</span><span class="product-number">(689)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand4">
												  <label class="form-check-label" for="chekBrand4">
													<span>Reebok</span><span class="product-number">(987)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand5">
												  <label class="form-check-label" for="chekBrand5">
													<span>Adidas</span><span class="product-number">(358)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand6">
												  <label class="form-check-label" for="chekBrand6">
													<span>Puma</span><span class="product-number">(5682)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand7">
												  <label class="form-check-label" for="chekBrand7">
													<span>Ajio</span><span class="product-number">(5712)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand8">
												  <label class="form-check-label" for="chekBrand8">
													<span>Motorola</span><span class="product-number">(657)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand9">
												  <label class="form-check-label" for="chekBrand9">
													<span>amazon</span><span class="product-number">(984)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand10">
												  <label class="form-check-label" for="chekBrand10">
													<span>Canon</span><span class="product-number">(524)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand11">
												  <label class="form-check-label" for="chekBrand11">
													<span>Apple</span><span class="product-number">(168)</span>
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekBrand12">
												  <label class="form-check-label" for="chekBrand12">
													<span>Philips</span><span class="product-number">(279)</span>
												  </label>
												</div>
											   </div>
											</div>
											<hr> {% endcomment %}
											<div class="Price">
											  <h6 class="p-1 fw-bold bg-light">Price</h6>
											   <div class="Price-wrapper p-1">
												<div class="input-group">
												  <input type="text" class="form-control rounded-0" placeholder="$10">
												  <span class="input-group-text bg-section-1 border-0">-</span>
												  <input type="text" class="form-control rounded-0" placeholder="$10000">
												  <button type="button" class="btn btn-outline-dark rounded-0 ms-2"><i class='bx bx-chevron-right me-0'></i></button>
												</div>
											   </div>
											 </div>
											 <hr>
											 <div class="colors">
											  <h6 class="p-1 fw-bold bg-light">Colors</h6>
											   <div class="color-wrapper height-1 p-1">
												<div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor1">
												  <label class="form-check-label" for="chekColor1">
													<i class="bi bi-circle-fill me-1 text-danger"></i><span>Red</span><span class="product-number">(845)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor2">
												  <label class="form-check-label" for="chekColor2">
													<i class="bi bi-circle-fill me-1 text-primary"></i><span>Blue</span><span class="product-number">(257)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor3">
												  <label class="form-check-label" for="chekColor3">
													<i class="bi bi-circle-fill me-1 text-warning"></i><span>Yellow</span><span class="product-number">(968)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor4">
												  <label class="form-check-label" for="chekColor4">
													<i class="bi bi-circle-fill me-1 text-success"></i><span>Green</span><span class="product-number">(478)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor5">
												  <label class="form-check-label" for="chekColor5">
													<i class="bi bi-circle-fill me-1 text-info"></i><span>Skyblue</span><span class="product-number">(256)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor6">
												  <label class="form-check-label" for="chekColor6">
													<i class="bi bi-circle-fill me-1 text-dark"></i><span>Black</span><span class="product-number">(124)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor7">
												  <label class="form-check-label" for="chekColor7">
													<i class="bi bi-circle-fill me-1 text-purple"></i><span>Purple</span><span class="product-number">(897)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor8">
												  <label class="form-check-label" for="chekColor8">
													<i class="bi bi-circle-fill me-1 text-orange"></i><span>Orange</span><span class="product-number">(68)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor9">
												  <label class="form-check-label" for="chekColor9">
													<i class="bi bi-circle-fill me-1 text-cyane"></i><span>Cyane</span><span class="product-number">(784)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor10">
												  <label class="form-check-label" for="chekColor10">
													<i class="bi bi-circle-fill me-1 text-brown"></i><span>Brown</span><span class="product-number">(532)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor11">
												  <label class="form-check-label" for="chekColor11">
													<i class="bi bi-circle-fill me-1 text-ten"></i><span>Ten</span><span class="product-number">(532)</span>
												  </label>
												 </div>
												 <div class="form-check">
												  <input class="form-check-input" type="checkbox" value="" id="chekColor12">
												  <label class="form-check-label" for="chekColor12">
													<i class="bi bi-circle-fill me-1 text-pink"></i><span>Pink</span><span class="product-number">(452)</span>
												  </label>
												 </div>
											   </div>
											 </div>
											 <hr>
											 <div class="discount">
											  <h6 class="p-1 fw-bold bg-light">Discount Range</h6>
											   <div class="discount-wrapper p-1">
												<div class="form-check">
												  <input class="form-check-input" name="exampleRadios" type="radio" value="option1" id="chekDisc1">
												  <label class="form-check-label" for="chekDisc1">
													10% and Above
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" name="exampleRadios" type="radio" value="option2" id="chekDisc2">
												  <label class="form-check-label" for="chekDisc2">
													20% and Above
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" name="exampleRadios" type="radio" value="option3" id="chekDisc3">
												  <label class="form-check-label" for="chekDisc3">
													30% and Above
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" name="exampleRadios" type="radio" value="option4" id="chekDisc4">
												  <label class="form-check-label" for="chekDisc4">
													40% and Above
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" name="exampleRadios" type="radio" value="option5" id="chekDisc5">
												  <label class="form-check-label" for="chekDisc5">
													50% and Above
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" name="exampleRadios" type="radio" value="option6" id="chekDisc6">
												  <label class="form-check-label" for="chekDisc6">
													60% and Above
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" name="exampleRadios" type="radio" value="option7" id="chekDisc7">
												  <label class="form-check-label" for="chekDisc7">
													70% and Above
												  </label>
												</div>
												<div class="form-check">
												  <input class="form-check-input" name="exampleRadios" type="radio" value="option8" id="chekDisc8">
												  <label class="form-check-label" for="chekDisc8">
													80% and Above
												  </label>
												</div>
												</div>
											  </div>
										  </div>
										</div>
									  </div>
									</div>
								  </div>
							  </nav>
							</div> 
							<div id="product-list" class="col-12 col-xl-9">
								<div class="product-wrapper">
									<div class="toolbox d-lg-flex align-items-center mb-3 gap-2 p-3 bg-white border">
										<div class="d-flex flex-wrap flex-grow-1 gap-1">
											<div class="d-flex align-items-center flex-nowrap">
												<p class="mb-0 font-13 text-nowrap">Sort By:</p>
												<select class="form-select ms-3 rounded-0">
													<option id="default" value="default" selected="selected">Default sorting</option>
													<option id="s-rating" value="rating">Sort by average rating</option>
													<option id="s-date" value="date_created">Sort by newness</option>
													<option id="s-nprice" value="price">Sort by price: low to high</option>
													<option id="s-pprice" value="-price">Sort by price: high to low</option>
												</select>
											</div>
											<div class="d-none d-xl-flex">
												<button id="filter-btn" type="button" class="btn btn-dark rounded-0 text-uppercase"><span><i class='bx bx-filter-alt me-1'></i>Filters</span></button>
											</div>
										</div>
									</div>
									<div class="product-grid">
										<div class="row row-cols-2 row-cols-md-3 row-cols-lg-3 row-cols-xl-4 row-cols-xxl-5 g-3 g-sm-4">

											{% for product in all_product%}
											<div class="col">
												<div class="card p-2 rounded border dynamic-height">
													<div class="position-relative overflow-hidden">
														<div class=" position-absolute top-0 end-0">
															<a  href="/add_to_favourite/{{product.id}}/" ><i 
															  {% if product.id in request.user.buyer.get_wishlist %}
															  style="color:red !important;"
															  {% endif %}
															  style="color:black;" class="bx bxs-heart"></i></a>
															</div>
													  <a href="{% url 'product_single' id=product.id %}">
						
														<img style="object-fit:contain;" 
														{% if product.product_images.image1%}
														 src="{{product.product_images.image1.url}}" 
														 {% elif product.product_images.image2%}
														 src="{{product.product_images.image2.url}}" 
														 {% elif product.product_images.image3%}
														 src="{{product.product_images.image3.url}}" 
														 {% elif product.product_images.image4%}
														 src="{{product.product_images.image4.url}}" 
														 {% elif product.product_images.image5%}
														 src="{{product.product_images.image5.url}}" 
														 {% else %} 
														 src="" 
														 {% endif %} 
														 class="w-100 p-3" alt="product-image">
													</a>
													</div>
													<div class="card-body px-0">
													  <div class="d-flex align-items-center justify-content-between">
														  <div class="">
															<a href="{% url 'product_single' id=product.id %}">
																<p style="font-size: 0rem" class="mb-1 dynamic-font product-short-name">
																  {{product.itmclass|truncatewords:2}}
																</p>
																<h6 style="font-size: 0rem; height:40px" class="mb-0 fw-bold dynamic-font product-short-title">
																  {{product.itmname|truncatewords:3}}
																</h6>
																</a>
														  </div>
													  </div>
													  <div class="w-60 rates cursor-pointer" >
														<input style="margin:0px !important; padding:0px !important;"
														  type="stars"
														  class="rating container-fluid"
														  readonly
														  value="{{ product.average_rating }}"
														  data-size="xs"
														  data-stars="5"
														/>
													  </div>
													  <div style="margin-top: -20px !important" class="ms-1">
														<p class="mb-0 dynamic-font">
														  <strong>{{product.total_review}} Ratings </strong>
														</p>
													  </div>
													  <div class="product-price d-flex align-items-center justify-content-start gap-2 mt-2">
														<div
														class="h6 fw-light fw-bold text-secondary text-decoration-line-through"
													  >
													  <p class="mb-0 dynamic-font"> ₹{{product.itm_old_price}}</p>
													  </div>
													  <div class="h6 fw-bold"><p class="mb-0 dynamic-font">₹{{product.itm_new_price}}</p></div>
													  </div>
													</div>
												  </div>
											  </div>
											{% endfor %}
										  </div><!--end row-->
			
									</div>
									<hr>
									<nav class="d-flex justify-content-between" aria-label="Page navigation">
										<ul class="pagination">
											<li class="page-item"><a class="page-link" href="javascript:;"><i class='bx bx-chevron-left'></i> Prev</a>
											</li>
										</ul>
										<ul class="pagination">
											<li class="page-item active d-none d-sm-block" aria-current="page"><span class="page-link">1<span class="visually-hidden">(current)</span></span>
											</li>
											<li class="page-item d-none d-sm-block"><a class="page-link" href="javascript:;">2</a>
											</li>
											<li class="page-item d-none d-sm-block"><a class="page-link" href="javascript:;">3</a>
											</li>
											<li class="page-item d-none d-sm-block"><a class="page-link" href="javascript:;">4</a>
											</li>
											<li class="page-item d-none d-sm-block"><a class="page-link" href="javascript:;">5</a>
											</li>
										</ul>
										<ul class="pagination">
											<li class="page-item"><a class="page-link" href="javascript:;" aria-label="Next">Next <i class='bx bx-chevron-right'></i></a>
											</li>
										</ul>
									</nav>
								</div>
							</div>
						</div>
						<!--end row-->
					</div>
				</section>
				<!--end shop area-->


	<script>
		function hide_alert(){
			document.getElementById("alert-box").style.display="None";
		   }
		   setTimeout(hide_alert,3000);


		   function toggleFilters() {
			const filterList = document.getElementById("filter-list");
			const productList = document.getElementById("product-list");
			const filterButton = document.querySelector("button.btn-dark.rounded-0.text-uppercase");

			// Toggle the class on the filter list div
			filterList.classList.toggle("d-xl-none");
			
			// Toggle the class on the product list div
			productList.classList.toggle("col-xl-9");
			productList.classList.toggle("col-xl-12");
		  }
		  
		  // Attach the click event listener to the button
		  const filterButton = document.querySelector("#filter-btn");
		  filterButton.addEventListener("click", toggleFilters);
		  
	</script>
{% endblock content%}